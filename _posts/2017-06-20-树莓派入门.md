---
layout: post
title:  "树莓派入门"
author: Terry
date:   2017-06-20 11:00:00 +0800
categories: linux
tags: Respberrypi 树莓派 安装系统 SSH
---

* content
{:toc}

# 简介
　　它由英国的树莓派基金会所开发，目的是以低价硬件及自由软件刺激在学校的基本电脑科学教育.一个像卡片差不多大小的硬件,可以安装操作系统,可以连网,接电视,播放高清视频.就像一个非常迷你的PC机.它只有CPU,主板,提供了一些接口,如USE, HDMI,GPIO等.所以你至少得准备一张8G的TF卡,5V 2.5A 的电源线.最好还要一个支持HDMI的显示,键盘,鼠标等外设.组装成一台小小的电脑.然后就是安装系统,安装软件.Do anything what you want to do!



# 硬件介绍
　　硬件以 respberrypi 3b 以样本进行介绍.

1. 1.2GHz 四核 Broadcom BCM2837 64 位 ARMv8 处理器
2. 板载 BCM43143 WiFi
3. 板载低功耗蓝牙 (BLE) 蓝牙和wifi使用的是BCM43438芯片，博通公司的
4. 1GB RAM
5. 4 个 USB 2 端口
6. 40 针扩展 GPIO
7. HDMI 和 RCA 视频输出
8. 4路立体声输出和复合视频端口
9. CSI照相机端口用于连接树莓派照相机
10. DSI显示端口用于连接树莓派触屏显示器
11. 微型SD端口, 用于下载操作系统以及存储数据

　　这些算是主要的硬件支持了.本身是没有电源的,也没有过流保护的.你可以使用一个5V,2.5A的电源适配器作为小派的电源,直接插入后加电就可以了.若没有插入卡,只有电源灯会亮.所以得插卡,卡上还得装好系统.

　　接入必须的外设,外设因人而异.最简单就是接入支持HDMI的显示,键盘,鼠标,连接上网线.当然也可以什么都不接,直接在卡上写入系统,用各种方法得到IP,使用SSH连接系统.

# 安装操作系统
　　官方提供了两种安装方法,一种叫NOOBS, 一种是直接写RASPBIAN.其它三方提供的系统的安装一般是直接写入,大部分都有详细说明,这里只介绍官方提供的,在安装系统之前,请先确保已经对你的SD卡(TF卡)进行格式化. 官方建议使用[SD Formatter
4.0](https://www.sdcard.org/downloads/formatter_4/index.html)进行格式化.没有下载的就去下载个吧,免费而且支持Windows和Mac呢.

　　**NOOBS**, 建议初学者使用的方法,全名叫:  New Out Of the Box Software. 官方还提供了一个[视频教学](https://www.raspberrypi.org/help/videos/#noobs-setup).先[下载NOOBS](https://www.raspberrypi.org/downloads/noobs/),解压后把文件全部拷贝到SD卡的根目录下.插入派后通电启动,然后根界面给出的选择就可以安装系统了.非常简单

　　**RASPBIAN**, 这是直接写入文件,先[下载](https://www.raspberrypi.org/downloads/raspbian/),有两个系统文件,一个LITE版本是不包含桌面,另一个WITH PIXEL 是包含PIXEL桌面.根据需要下载吧.解压文件,若失败,可以使用[7Zip](http://www.7-zip.org/download.html)(Windows) 或 [The Unarchiver](http://wakaba.c3.cx/s/apps/unarchiver.html)(Mac)进入解压. 解压完文件之后,使用[Etcher](https://etcher.io/)把解压后的Image文件写入到.最后就是插入派后通电启动,直接进入系统

### 更新
　　在连网的情况下,执行以下命令

```shell
sudo apt-get update
sudo apt-get upgrade
```

更新过程中下载的包存储在: `/var/cache/apt/archives`, 可以使用 `sudo apt-get clean` 来释放硬盘空间
要安装应用程序,使用`apt-get`

# 无外设使用树莓派
　　无外设的情况安装PI,要用直接写入PASPBIAN的方式.此时统默认的SSH是关闭的,你可以在内存卡根目录新建一个**SSH**文件的方式来启动SSH.使用SSH连接PI, 首先确定PI已经连接上网络(插上网线或连接上WIFI),那么只要找到它的IP地址,再使用 `pi@xxx.xxx.xxx.xxx` 登陆入树莓派就可以了.(树莓派默认用户名: pi, 密码: raspberry).

## 获取IP地址
　　以下几个方法小小记录下吧
* 进入路由器,查看IP地址
* 使用IP扫描器来扫描内网的IP.在网上有人介绍使用 [ipscan22.exe](http://pan.baidu.com/share/link?shareid=3434443053&uk=605377859)进行扫描,不过我没试过.我用的MAC系统,直接用命令 `arp -a` 来查询
* 使用工具 `arp-scan` 来扫描
* 一个更傻的方法.用`ping -t 1 -q ip地址`, 一个一个的ping本子网下的所有IP, 把ping到的IP一个一个的试着去登陆
* 这一条**没有亲测过**.用网线把电脑与PI直接连接,电脑必须能连接到网络,然后让电脑共享网络允许其它用户通过它来连接, Windows: 设置->网络->wlan->网络与共享中心->wlan->属性->共享->允许​其它用户通过它来连接->确定. MAC: 网络->Wi-Fi->高级->创建电脑对电脑网络; 共享: 共享以下来源的连接: 以太网, 用以下端口共享给电脑: Wi-Fi, 选中互联网共享. 确定

## SSH登陆后常规设置
　　可以用PUTTY来登陆,也可以直接用terminal,看自己爱好.第一次连接到SSH后,一般要设置下派的静态地址,以免每次登陆都要扫描下IP.

```shell
vi /etc/dhcpcd.conf
# 使用 vi 编辑文件，增加下列配置项

# 指定接口 eth0
interface eth0
# 指定静态IP，/24表示子网掩码为 255.255.255.0
static ip_address=192.168.1.20/24
# 路由器/网关IP地址
static routers=192.168.1.1
# 手动自定义DNS服务器
static domain_name_servers=114.114.114.114

# 修改完成后，按esc键后输入 :wq 保存。重启树莓派就生效了
sudo reboot
```
